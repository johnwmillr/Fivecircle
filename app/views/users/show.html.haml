-# in app/views/users/show.html.haml
-# I realize using @user.id is kind of a kludge. We should use a @current_user variable

%h1 User #{@user.id} Profile (it should show current location)
%p
.card
  .card-block
    #map
#checkin
  = button_to "Check-in", user_checkin_path(@user.id), :method => :post

%h1 User #{@user.id} Media
%table{:border => 1}
  #media
    %thead
      %th User ID
      %th Date
      %th Location
      %th View Post
    %tbody
      - @media.each do |medium|
        - if medium.user_id == @user.id          
          %tr     
            %td= @user.id   
            %td= medium.created_at
            %td= "(#{medium.latitude}, #{medium.longitude})"          
            %td= link_to "View post", user_medium_path(@user.id,medium.id)
            
%h1 User #{@user.id} Coupons
%table{:border => 1}
  #coupon
    %thead
      %th User ID
      %th Coupon Name
      %th Description
      %th Use Coupon
    %tbody
      - @current_user.saved_coupons.each do |coupon|
        - @coupons.each do |coupon_lookup|
          - if coupon_lookup.id == coupon.coupon_id
            - name = coupon_lookup.couponName
            - description = coupon_lookup.description
          %tr     
            %td= @user.id   
            %td= name
            %td=   description    
            %td= link_to "Use", root_path
  
= link_to "Add new post", new_user_medium_path(@user.id)